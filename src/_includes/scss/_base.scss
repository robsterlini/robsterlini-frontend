html, body {
  display: flex;
  flex-direction: column;
  flex: 1;
  min-height: 100%;
}

@mixin dark-colors {
  --c-hB: #110E14; // Header BG

  --c-bB: #19161C; // Body BG
  --c-bC: #EEE7E7; // Body Color
  --c-bC-66: #{rgba(#EEE7E7, 0.66)}; // Body Color (66%)
  --c-bC-33: #{rgba(#EEE7E7, 0.33)}; // Body Color (33%)
  --c-bA: #f75c6a; // Body Accent

  --figO: 0.9; // Figure Opacity

  --c-cB: #000; // Contrast BG
  --c-cC: #FFF; // Contrast Color
  --c-cC-50: #{rgba(#FFF, 0.5)};
  --c-cA: #FBCDD1; // Contrast Accent
}

@mixin light-colors {
  --c-hB: #FCFBFB;

  --c-bB: #EEE7E7;
  --c-bC: #19161C;
  --c-bC-66: #{rgba(#19161C, 0.66)};
  --c-bC-33: #{rgba(#19161C, 0.33)};
  --c-bA: #{darken(#EA3243, 5%)};

  --c-cB: #FFF;
  --c-cC: #000;
  --c-cC-50: #{rgba(#000, 0.5)};
  --c-cA: #6C000A;
}

@mixin contrast-colors {
  --c-hB: var(--c-cB);

  --c-bB: var(--c-cB);
  --c-bC: var(--c-cC);
  --c-bC-66: var(--c-cC);
  --c-bC-33: var(--c-cC-50);
  --c-bA: var(--c-cA);
}

[data-color-preference='auto'] {
  @include dark-colors;

  @media (prefers-color-scheme: light) {
    @include light-colors;
  }
}

[data-color-preference='dark'] {
  @include dark-colors;
}

[data-color-preference='light'] {
  @include light-colors;
}

[data-contrast-preference='auto'] {
  @media (prefers-contrast: high) {
    @include contrast-colors;
  }
}

[data-contrast-preference='high'] {
  @include contrast-colors;
}

html {
  background: var(--c-bB);
  line-height: 1.45; // TODO: Var
  font-size: 0.9375rem;
  scroll-behavior: smooth;

  @include min-width(384) {
    font-size: 1rem;
  }

  @include min-width(768) {
    font-size: 1.125rem;
  }
}

body {
  -moz-osx-font-smoothing: grayscale;
  -webkit-font-smoothing: antialiased;

  color: var(--c-bC);
  font-family: 'rsa-body', sans-serif;
  font-variant-numeric: oldstyle-nums;
  font-weight: 300;
  opacity: 0;
  transition: opacity 300ms ease-out;
  visibility: hidden;

  .fonts-loaded & {
    opacity: 1;
    visibility: visible;
  }
}

::selection {
  background: var(--c-bC);
  color: var(--c-bB);
}

.main {
  animation: opacity-transform 400ms 250ms ease-out both;
  padding: 8vw 0;
}

.group {
  margin-left: auto;
  margin-right: auto;
  max-width: 80rem;
  width: 92%;
}

a,
.link {
  appearance: none;
  background: none;
  color: inherit;
  cursor: pointer;
  font: inherit;
  font-weight: 500;
  transition: 125ms ease-in-out;
  transition-property: color, opacity, text-decoration-color;
  text-decoration: underline;
  text-decoration-color: var(--c-bC-66, currentColor);
  padding: unset;
  border: 0;

  code {
    text-decoration: inherit;
    text-decoration-color: currentColor;
  }

  &:hover,
  &:focus {
    color: var(--c-bA);
    text-decoration-color: currentColor;
    border: 0;
  }

  &:focus {
    outline: var(--c-bC-66) 1px dotted;
  }

  &:active {
    opacity: 0.66;
  }
}

.link--pseudo {

  &,
  &:hover,
  &:focus {
    opacity: 1;
    color: currentColor;
    text-decoration: none;
    transition: none;
  }
}

.link__pseudo {
  text-decoration: underline;
  text-decoration-color: var(--c-bC-66, currentColor);
  transition: 125ms ease-in-out;
  transition-property: color, opacity, text-decoration-color;

  .link--pseudo:hover &,
  .link--pseudo:focus & {
    color: var(--c-bA);
    text-decoration-color: currentColor;
  }

  .link--pseudo:active & {
    opacity: 0.66;
  }
}
