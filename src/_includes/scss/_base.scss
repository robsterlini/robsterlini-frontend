html,
body {
  display: flex;
  flex-direction: column;
  flex: 1;
  min-height: 100%;
}

html {
  background: var(--c-background);
  line-height: $line-height-body;
  font-size: 15 / 16 * 1rem;
  scroll-behavior: smooth;

  @include min-width($breakpoint-xsmall) {
    font-size: 16 / 16 * 1rem;
  }

  @include min-width($breakpoint-mid) {
    font-size: 17 / 16 * 1rem;
  }

  @include min-width($breakpoint-large) {
    font-size: 18 / 16 * 1rem;
  }

  @include min-width($breakpoint-xlarge) {
    font-size: 19 / 16 * 1rem;
  }
}

body {
  --font-loaded-animations: paused;

  -moz-osx-font-smoothing: grayscale;
  -webkit-font-smoothing: antialiased;

  color: var(--c-text);
  font-family: var(--font-family-body);
  font-variant-numeric: oldstyle-nums;
  font-weight: 300;
  visibility: hidden;

  .fonts-loaded & {
    --font-loaded-animations: running;

    visibility: visible;
  }
}

::selection {
  background: var(--c-highlight);
}

.main {
  animation: opacity $main-transition-duration ease-out both
    var(--font-loaded-animations);
  padding: calc(var(--spacing) * 2) 0;
}

.group {
  margin-left: auto;
  margin-right: auto;
  max-width: 80rem;
  width: 92%;

  &--thin {
    @include min-width($breakpoint-large) {
      max-width: 80rem / 12 * 10;
      width: 92% / 12 * 10;
    }

    @include min-width($breakpoint-xlarge) {
      max-width: 80rem / 12 * 8;
      width: 92% / 12 * 8;
    }
  }
}

[href*="twitter.com"] {
  --c-link-arrow-idle: var(--c-twitter);
}

[href*="github.com"] {
  --c-link-arrow-idle: var(--c-github);
}

[href*="fueled.com"] {
  --c-link-arrow-idle: var(--c-fueled);
}

[href*="zoopla.co.uk"] {
  --c-link-arrow-idle: var(--c-zoopla);
}

[href*="tutsplus.com"] {
  --c-link-arrow-idle: var(--c-envato);
}

[href*="instagram.com"] {
  --c-link-arrow-idle: var(--c-instagram);
}

[href*="netlify.com"],
[href*="netlify.app"] {
  --c-link-arrow-idle: var(--c-netlify);
}

[href*="11ty.dev"] {
  --c-link-arrow-idle: var(--c-11ty);
}

[href*="strava.com"] {
  --c-link-arrow-idle: var(--c-strava);
}

[href*="codepen.io"] {
  --c-link-arrow-idle: var(--c-codepen);
}

[href*="linkedin.com"] {
  --c-link-arrow-idle: var(--c-linkedin);
}

[href*="youtube.com"] {
  --c-link-arrow-idle: var(--c-youtube);
}

[href="/fundraising"] {
  --c-link-arrow-idle: var(--c-mind);
}

[id] {
  scroll-margin-top: calc(2.5rem + 1em);
  scroll-margin-bottom: 4rem;
}

a,
.link {
  appearance: none;
  background: none;
  color: var(--c-link-idle);
  cursor: pointer;
  font: inherit;
  font-weight: 500;
  transition: 125ms ease-in-out;
  transition-property: background-color, color, opacity, text-decoration-color;
  text-decoration: underline;
  text-decoration-color: var(--c-link-underline-idle);
  text-underline-offset: 0.05em;
  padding: unset;
  position: relative;
  border: 0;

  code {
    color: inherit;
    font-weight: inherit;
    text-decoration: none;
  }

  abbr {
    // Prevents a strange double line from being rendered
    text-decoration: none !important;
    border: 0 !important;
    text-underline-position: unset !important;
  }

  &:hover {
    color: var(--c-link-hover);
    text-decoration-color: var(--c-link-underline-hover);
  }

  &:focus-visible {
    outline: 2px solid var(--c-focus-ring);
  }

  &:active {
    opacity: 0.66;
  }
}

@mixin link-external {
  &::after {
    color: var(--c-link-arrow-idle);
    content: "â†—";
    font-family: var(--font-family-body);
    font-weight: $font-weight-body-bold;
    position: relative;
    top: -0.2em;
    font-style: normal;
    letter-spacing: -0.15em;
    margin-left: 0.05em;
    margin-right: 0.2em;
    font-size: 0.825em;
    transition: 125ms ease-in-out;
    transition-property: color;
    text-decoration: inherit;
    text-decoration-color: var(--c-background) !important;
  }
}

@mixin link-external-hover {
  &::after {
    color: var(--c-link-arrow-hover);
  }
}

.link--external,
.links--external [href^="http"],
.links--external [href="/fundraising"] {
  @include link-external;

  &:hover {
    @include link-external-hover;
  }
}

.link--pseudo {
  color: currentColor;
  text-decoration: none;
  transition: none;
  font-weight: inherit;

  &:focus-visible {
    outline: 0;
  }

  &.link--external {
    &::after {
      display: none;
    }
  }
}

.link__pseudo {
  color: var(--c-link-idle);
  text-decoration: underline;
  font-weight: 500;
  text-decoration-color: var(--c-link-underline-idle);
  transition: 125ms ease-in-out;
  transition-property: background-color, color, opacity, text-decoration-color;

  .link--pseudo:hover & {
    color: var(--c-link-hover);
    text-decoration-color: var(--c-link-underline-hover);
  }

  .link--pseudo:focus-visible & {
    outline: 2px solid var(--c-focus-ring);
  }

  .link--pseudo:active & {
    opacity: 0.66;
  }

  .link--external[href^="http"] & {
    @include link-external;
  }

  .link--external[href^="http"]:hover & {
    @include link-external-hover;
  }
}

:target {
  animation: fade-highlight 2s 1s ease-out both var(--font-loaded-animations);

  @keyframes fade-highlight {
    0% {
      background-color: var(--c-highlight);
      box-shadow: var(--c-highlight) 0.25rem 0 0 0,
        var(--c-highlight) -0.25rem 0 0 0;
    }
    100% {
      background-color: transparent;
      box-shadow: transparent 0.25rem 0 0 0, transparent -0.25rem 0 0 0;
    }
  }
}
