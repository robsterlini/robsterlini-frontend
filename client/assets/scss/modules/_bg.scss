@charset 'UTF-8';

// ==== Modules ==========================================================
// Background
// =======================================================================


// ==== Background ==========================
// Base
// ==========================================

.bg {
  background: var(--bg-bg);
  margin-bottom: -35%;
  position: relative;
  padding-top: 50%;

  @include min-width(tp(header-fixed)) {
    top: unit(header-height) * -2;
  }

  // @include min-width(bp(s)) {
  //   top: unit(header-offset) + (unit(header-height) / 2);
  // }

  &__bg {
    background: var(--bg-bg);

    &::after {
      @include cover;

      background: linear-gradient(transparent, var(--base-bg));
      bottom: -1px;
      content: '';
      top: 50%;
      z-index: 1;
    }
  }

  &__image {
    animation: bg-hide $timing $easing both;
    background: var(--bg-bg) center no-repeat;
    background-size: cover;
    filter: grayscale(0.33);
    mix-blend-mode: overlay;
    opacity: 0;
    transform-origin: center bottom;
    z-index: 1;

    @media (prefers-color-scheme: light) {
      mix-blend-mode: unset;
    }

    @keyframes bg-hide {
      0% {
        opacity: 0.66;
      }

      100% {
        opacity: 0;
      }
    }

    @media (prefers-color-scheme: light) {
      @keyframes bg-hide {
        0% {
          opacity: 0.15;
        }

        100% {
          opacity: 0;
        }
      }
    }

    &--loaded {

      .page--is-loaded & {
        animation: bg-reveal $timing-transition $easing both;
      }

      @keyframes bg-reveal {
        0% {
          opacity: 0;
          transform: scale(1.015);
        }

        100% {
          opacity: 0.75;
          transform: none;
        }
      }

      @media (prefers-color-scheme: light) {
        @keyframes bg-reveal {
          0% {
            opacity: 0;
            transform: scale(1.015);
          }

          100% {
            opacity: 0.15;
            transform: none;
          }
        }
      }
    }
  }
}
